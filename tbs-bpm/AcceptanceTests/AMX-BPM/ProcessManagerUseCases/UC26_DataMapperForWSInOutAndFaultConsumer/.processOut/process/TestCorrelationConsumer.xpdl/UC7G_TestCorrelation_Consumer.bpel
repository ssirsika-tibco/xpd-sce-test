<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="UC7G_TestCorrelation_Consumer" suppressJoinFailure="yes"
    tibex:bxVersion="1.14.0" tibex:explicitCompensation="yes"
    tibex:xpdlId="_Nh_hwN7JEeWFR5fSSJBGOw"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ns="http://www.tibco.com/bs3.0/_ojcIIN7EEeWRjb3O6TY05Q/UC7G_TestCorrelationProvider"
    xmlns:ns0="http://example.com/someclasses"
    xmlns:ns1="http://www.tibco.com/bs3.0/_ojcIIN7EEeWRjb3O6TY05Q"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns="http://www.tibco.com/bs3.0/_ojcIIN7EEeWRjb3O6TY05Q/UC7G_TestCorrelationProvider"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="_BX_sequence_2">
            <startingVariables>
                <variable>UC7GClass_Input</variable>
            </startingVariables>
        </task>
        <task name="ERRORUnexpectedreturnFromRPCLiteral">
            <startingVariables>
                <variable>UC7GClass_Output</variable>
                <variable>UC7GClass_Input</variable>
            </startingVariables>
        </task>
        <task name="_BX_sequence_5">
            <startingVariables>
                <variable>UC7GClass_Input</variable>
            </startingVariables>
        </task>
        <task name="ScriptTask">
            <startingVariables>
                <variable>UC7GClass_Input</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="TestCorrelation.wsdl" namespace="http://www.tibco.com/bs3.0/_ojcIIN7EEeWRjb3O6TY05Q/UC7G_TestCorrelationProvider"/>
    <bpws:partnerLinks>
        <bpws:partnerLink
            name="UC7G_TestCorrelationProvider_EP_Consumer"
            partnerLinkType="ns:UC7G_TestCorrelationProvider_PLT" partnerRole="UC7G_TestCorrelationProviderProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="UC7GClass_Input"
            tibex:class="com.example.someclasses.UC7GClass" tibex:xpdlId="_2WwUx97JEeWFR5fSSJBGOw"/>
        <bpws:variable name="UC7GClass_Output"
            tibex:class="com.example.someclasses.UC7GClass" tibex:xpdlId="_2-7ICt7JEeWFR5fSSJBGOw"/>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow">
        <bpws:links>
            <bpws:link
                name="CorrelatingOperation to _NL9K4d7KEeWFR5fSSJBGOw" tibex:xpdlId="_NMDRgN7KEeWFR5fSSJBGOw"/>
            <bpws:link
                name="_Le_OlN7REeWFR5fSSJBGOw to ERRORUnexpectedreturnvalues" tibex:xpdlId="_b-9FI97KEeWFR5fSSJBGOw"/>
            <bpws:link name="_NL9K4d7KEeWFR5fSSJBGOw to SUCCESS" tibex:xpdlId="_POp35N7JEeWFR5fSSJBGOw"/>
            <bpws:link
                name="_NL9K4d7KEeWFR5fSSJBGOw to _Le_OlN7REeWFR5fSSJBGOw" tibex:xpdlId="_LfLb0N7REeWFR5fSSJBGOw"/>
            <bpws:link name="StartEvent to ScriptTask" tibex:xpdlId="_znrfYN7JEeWFR5fSSJBGOw"/>
            <bpws:link
                name="StartCorrelationTest to CorrelatingOperation" tibex:xpdlId="_ID1agN7KEeWFR5fSSJBGOw"/>
            <bpws:link name="ScriptTask to StartCorrelationTest" tibex:xpdlId="_oPgGMN7JEeWFR5fSSJBGOw"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_POp34t7JEeWFR5fSSJBGOw" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to ScriptTask"/>
                </bpws:sources>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="SUCCESS" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_POp3497JEeWFR5fSSJBGOw">
            <bpws:targets>
                <bpws:target linkName="_NL9K4d7KEeWFR5fSSJBGOw to SUCCESS"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:scope name="StartCorrelationTest"
            tibex:migrationAllowed="yes" tibex:type="serviceTask" tibex:xpdlId="_oPT49N7JEeWFR5fSSJBGOw">
            <bpws:targets>
                <bpws:target linkName="ScriptTask to StartCorrelationTest"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="StartCorrelationTest to CorrelatingOperation"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable
                    messageType="ns:UC7G_TestCorrelationProvider_StartCorrelationTest_INPUT" name="v_d159e51c"/>
                <bpws:variable
                    messageType="ns:UC7G_TestCorrelationProvider_StartCorrelationTest_OUTPUT" name="v_648435cf"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:scope name="_BX_ToSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable name="MESSAGE_InputClass" tibex:class="com.example.someclasses.UC7GClass"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_2">
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'UC7GClass_Input' to 'InputClass'
MESSAGE_InputClass = ScriptUtil.copy(UC7GClass_Input);


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                        <bpws:assign name="_BX_assign" validate="no">
                            <bpws:copy tibex:transform="ObjectToXml">
                                <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[MESSAGE_InputClass]]></bpws:from>
                                <bpws:to part="InputClass" variable="v_d159e51c"/>
                            </bpws:copy>
                        </bpws:assign>
                    </bpws:sequence>
                </bpws:scope>
                <bpws:invoke inputVariable="v_d159e51c"
                    name="_BX_invoke" operation="StartCorrelationTest"
                    outputVariable="v_648435cf"
                    partnerLink="UC7G_TestCorrelationProvider_EP_Consumer" portType="ns:UC7G_TestCorrelationProvider"/>
                <bpws:scope name="_BX_FromSvcDataMapping">
                    <bpws:variables>
                        <bpws:variable name="MESSAGE_OutputClass" tibex:class="com.example.someclasses.UC7GClass"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_3">
                        <bpws:assign name="_BX_assign_2" validate="no">
                            <bpws:copy tibex:objectName="UC7GClass"
                                tibex:objectNamespace="http://example.com/someclasses" tibex:transform="XmlToObject">
                                <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_648435cf.OutputClass]]></bpws:from>
                                <bpws:to variable="MESSAGE_OutputClass"/>
                            </bpws:copy>
                        </bpws:assign>
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript_2" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'OutputClass' to 'UC7GClass_Output'
UC7GClass_Output = ScriptUtil.copy(MESSAGE_OutputClass);


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                    </bpws:sequence>
                </bpws:scope>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptTask"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_znlYwd7JEeWFR5fSSJBGOw" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to ScriptTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptTask to StartCorrelationTest"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[UC7GClass_Input = com_example_someclasses_Factory.createUC7GClass();
UC7GClass_Input.correlationAttribute = Process.getId();
UC7GClass_Input.attribute2 = "Attribute Two!";
UC7GClass_Input.attribute3 = "Attribute Three!";
]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="CorrelatingOperation"
            tibex:migrationAllowed="yes" tibex:type="serviceTask" tibex:xpdlId="_IDvT4N7KEeWFR5fSSJBGOw">
            <bpws:targets>
                <bpws:target linkName="StartCorrelationTest to CorrelatingOperation"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="CorrelatingOperation to _NL9K4d7KEeWFR5fSSJBGOw"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable
                    messageType="ns:UC7G_TestCorrelationProvider_CorrelatingOperation_INPUT" name="v_64ed8d55"/>
                <bpws:variable
                    messageType="ns:UC7G_TestCorrelationProvider_CorrelatingOperation_OUTPUT" name="v_436594b6"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_4">
                <bpws:scope name="_BX_ToSvcDataMapping_2">
                    <bpws:variables>
                        <bpws:variable name="MESSAGE_InputClass" tibex:class="com.example.someclasses.UC7GClass"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_5">
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript_3" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'UC7GClass_Input' to 'InputClass'
MESSAGE_InputClass = ScriptUtil.copy(UC7GClass_Input);


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                        <bpws:assign name="_BX_assign_3" validate="no">
                            <bpws:copy tibex:transform="ObjectToXml">
                                <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[MESSAGE_InputClass]]></bpws:from>
                                <bpws:to part="InputClass" variable="v_64ed8d55"/>
                            </bpws:copy>
                        </bpws:assign>
                    </bpws:sequence>
                </bpws:scope>
                <bpws:invoke inputVariable="v_64ed8d55"
                    name="_BX_invoke_2" operation="CorrelatingOperation"
                    outputVariable="v_436594b6"
                    partnerLink="UC7G_TestCorrelationProvider_EP_Consumer" portType="ns:UC7G_TestCorrelationProvider"/>
                <bpws:scope name="_BX_FromSvcDataMapping_2">
                    <bpws:variables>
                        <bpws:variable name="MESSAGE_OutputClass" tibex:class="com.example.someclasses.UC7GClass"/>
                    </bpws:variables>
                    <bpws:sequence name="_BX_sequence_6">
                        <bpws:assign name="_BX_assign_4" validate="no">
                            <bpws:copy tibex:objectName="UC7GClass"
                                tibex:objectNamespace="http://example.com/someclasses" tibex:transform="XmlToObject">
                                <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_436594b6.OutputClass]]></bpws:from>
                                <bpws:to variable="MESSAGE_OutputClass"/>
                            </bpws:copy>
                        </bpws:assign>
                        <bpws:extensionActivity>
                            <tibex:extActivity
                                name="_BX_DataMapperScript_4" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'OutputClass' to 'UC7GClass_Output'
UC7GClass_Output = ScriptUtil.copy(MESSAGE_OutputClass);


]]></tibex:script>
                            </tibex:extActivity>
                        </bpws:extensionActivity>
                    </bpws:sequence>
                </bpws:scope>
            </bpws:sequence>
        </bpws:scope>
        <bpws:empty name="_BX_gateway__NL9K4d7KEeWFR5fSSJBGOw"
            tibex:type="exclusiveGateway" tibex:xpdlId="_NL9K4d7KEeWFR5fSSJBGOw">
            <bpws:targets>
                <bpws:target linkName="CorrelatingOperation to _NL9K4d7KEeWFR5fSSJBGOw"/>
            </bpws:targets>
            <bpws:sources tibex:maxTrue="1">
                <bpws:source linkName="_NL9K4d7KEeWFR5fSSJBGOw to SUCCESS">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[(UC7GClass_Output.attribute2 == (UC7GClass_Input.attribute2 + "CorrelationWorked!")) && (UC7GClass_Output.attribute3 == (UC7GClass_Input.attribute3 + "CorrelationWorked!"));]]></bpws:transitionCondition>
                </bpws:source>
                <bpws:source linkName="_NL9K4d7KEeWFR5fSSJBGOw to _Le_OlN7REeWFR5fSSJBGOw">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
        </bpws:empty>
        <bpws:empty name="ERRORUnexpectedreturnvalues"
            tibex:migrationAllowed="yes" tibex:type="endEvent" tibex:xpdlId="_b-9FIt7KEeWFR5fSSJBGOw">
            <bpws:targets>
                <bpws:target linkName="_Le_OlN7REeWFR5fSSJBGOw to ERRORUnexpectedreturnvalues"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity
                name="ERRORUnexpectedreturnFromRPCLiteral"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_Le_OlN7REeWFR5fSSJBGOw" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_NL9K4d7KEeWFR5fSSJBGOw to _Le_OlN7REeWFR5fSSJBGOw"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="_Le_OlN7REeWFR5fSSJBGOw to ERRORUnexpectedreturnvalues"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__Le_OlN7REeWFR5fSSJBGOw"
                    workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant
                            entity="ORGANIZATIONAL_QUERY" rqlQuery="resource(name=&quot;tibco-admin&quot;)"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="UC7GClass_Input"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="UC7GClass_Output"/>
                    </userTaskParameters>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
    </bpws:flow>
</bpws:process>
