<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no"
    name="TestCatchOnUnserTaskProcess" suppressJoinFailure="yes"
    tibex:bxVersion="1.14.0" tibex:explicitCompensation="yes"
    tibex:xpdlId="_qDIv0ALgEea-E4BSZRWYbA"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ns="http://www.example.org/NewWSDLFileDM/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns="http://www.example.org/NewWSDLFileDM/"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="UserTaskWithIntermediateMessageAttached">
            <startingVariables>
                <variable>Parameter</variable>
                <variable>CorrelationField</variable>
            </startingVariables>
        </task>
        <task name="ScriptTask2">
            <startingVariables>
                <variable>Parameter</variable>
                <variable>CorrelationField</variable>
            </startingVariables>
        </task>
        <task name="SetCorrelation">
            <startingVariables>
                <variable>Parameter</variable>
                <variable>CorrelationField</variable>
            </startingVariables>
        </task>
        <task name="ScriptTask">
            <startingVariables>
                <variable>Parameter</variable>
                <variable>CorrelationField</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="NewWSDLFileDM.wsdl" namespace="http://www.example.org/NewWSDLFileDM/"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="NewWSDLFileDM_Provider2"
            partnerLinkType="ns:NewWSDLFileDM_PLT" partnerRole="NewWSDLFileDMProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="Parameter" tibex:parameter="inout"
            tibex:xpdlId="_k9hpcAL3EeavSad_iSNd1A" type="xsd:string"/>
        <bpws:variable name="CorrelationField"
            tibex:xpdlId="_n9sJcALkEea-E4BSZRWYbA" type="xsd:string"/>
        <bpws:variable name="_BX_fanVariable" type="xsd:int">
            <bpws:from>
                <bpws:literal><![CDATA[0]]></bpws:literal>
            </bpws:from>
        </bpws:variable>
    </bpws:variables>
    <bpws:correlationSets tibex:useVariables="yes">
        <bpws:correlationSet name="CorrelationField" properties="ns:TestCatchOnUnserTaskProcess_CorrelationField"/>
    </bpws:correlationSets>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow">
        <bpws:links>
            <bpws:link
                name="_BX_scope_UserTaskWithInterm to ScriptTask2" tibex:xpdlId="_BNv4cALlEea-E4BSZRWYbA"/>
            <bpws:link name="ScriptTask to EndEvent" tibex:xpdlId="_XqHLQAL6EeavSad_iSNd1A"/>
            <bpws:link name="ScriptTask2 to EndEvent" tibex:xpdlId="_tiUzhALgEea-E4BSZRWYbA"/>
            <bpws:link
                name="SetCorrelation to _BX_scope_UserTaskWithInterm" tibex:xpdlId="_v9Oy4ALkEea-E4BSZRWYbA"/>
            <bpws:link name="StartEvent to SetCorrelation" tibex:xpdlId="_rAlSswLkEea-E4BSZRWYbA"/>
            <bpws:link name="_BX_normalFlow to ScriptTask" tibex:xpdlId="_QtuA4wL6EeavSad_iSNd1A"/>
            <bpws:link name="_v9OL0ALkEea-E4BSZRWYbA to _BX_normalFlow"/>
        </bpws:links>
        <bpws:extensionActivity>
            <tibex:receiveEvent createInstance="yes" eventTimeout="0"
                name="StartEvent" tibex:type="startEvent"
                tibex:xpdlId="_tiUzggLgEea-E4BSZRWYbA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:sources>
                    <bpws:source linkName="StartEvent to SetCorrelation"/>
                </bpws:sources>
                <tibex:parameters>
                    <parameterDescription mandatory="yes" mode="InOut" name="Parameter"/>
                </tibex:parameters>
                <tibex:eventSource>
                    <tibex:startEvent eventType="Default"/>
                </tibex:eventSource>
            </tibex:receiveEvent>
        </bpws:extensionActivity>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_tiUzgwLgEea-E4BSZRWYbA">
            <bpws:targets>
                <bpws:target linkName="ScriptTask to EndEvent"/>
                <bpws:target linkName="ScriptTask2 to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="SetCorrelation"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_rAlSsALkEea-E4BSZRWYbA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartEvent to SetCorrelation"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="SetCorrelation to _BX_scope_UserTaskWithInterm"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__rAlSsALkEea-E4BSZRWYbA"
                    workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant
                            entity="ORGANIZATIONAL_QUERY" rqlQuery=""/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="true" mode="INOUT" name="Parameter"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="CorrelationField"/>
                    </userTaskParameters>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptTask2"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_eVTYQAL3EeavSad_iSNd1A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_scope_UserTaskWithInterm to ScriptTask2"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptTask2 to EndEvent"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[Process.auditLog(CorrelationField);
Process.auditLog(Parameter);]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="ScriptTask"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_QtuA4gL6EeavSad_iSNd1A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_normalFlow to ScriptTask"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="ScriptTask to EndEvent"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[Process.auditLog(CorrelationField);
Process.auditLog(Parameter);]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope
            name="_BX_scope_UserTaskWithIntermediateMessageAttached" tibex:migrationAllowed="yes">
            <bpws:targets>
                <bpws:target linkName="SetCorrelation to _BX_scope_UserTaskWithInterm"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_scope_UserTaskWithInterm to ScriptTask2">
                    <bpws:transitionCondition><![CDATA[$_BX_fanVariable=1]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
            <bpws:eventHandlers>
                <bpws:onEvent messageType="ns:NewOperationDMRequest"
                    operation="NewOperationDM"
                    partnerLink="NewWSDLFileDM_Provider2"
                    portType="ns:NewWSDLFileDM" tibex:cancel="yes"
                    tibex:xpdlId="_-0xO4ALkEea-E4BSZRWYbA" variable="v_65ac61df">
                    <bpws:correlations>
                        <bpws:correlation initiate="no" set="CorrelationField"/>
                    </bpws:correlations>
                    <bpws:scope name="CatchMessageEventWithDataMapper"
                        tibex:type="boundaryMessageEvent" tibex:xpdlId="_-0xO4ALkEea-E4BSZRWYbA">
                        <bpws:variables>
                            <bpws:variable name="MESSAGE_parameters" tibex:class="org.example.NewWSDLFileDM.NewOperationDMType"/>
                        </bpws:variables>
                        <bpws:sequence name="_BX_sequence">
                            <bpws:assign name="_BX_assign" validate="no">
                                <bpws:copy
                                    tibex:objectNamespace="http://www.example.org/NewWSDLFileDM/" tibex:transform="XmlToObject">
                                    <bpws:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[$v_65ac61df.parameters]]></bpws:from>
                                    <bpws:to variable="MESSAGE_parameters"/>
                                </bpws:copy>
                                <bpws:copy>
                                    <bpws:from><![CDATA[1]]></bpws:from>
                                    <bpws:to variable="_BX_fanVariable"/>
                                </bpws:copy>
                            </bpws:assign>
                            <bpws:extensionActivity>
                                <tibex:extActivity
                                    name="_BX_DataMapperScript" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                                    <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// Map from 'Script1' to 'Parameter'

// Function for user defined mapping script: Script1
function _f1_() { 
    return "abc";
}
Parameter = _f1_();

// Map from 'Script2' to 'CorrelationField'

// Function for user defined mapping script: Script2
function _f2_() { 
    return "abc";
}
MESSAGE_CorrelationField = _f2_();


]]></tibex:script>
                                </tibex:extActivity>
                            </bpws:extensionActivity>
                        </bpws:sequence>
                    </bpws:scope>
                </bpws:onEvent>
            </bpws:eventHandlers>
            <bpws:extensionActivity>
                <tibex:extActivity
                    name="UserTaskWithIntermediateMessageAttached"
                    tibex:type="userTask"
                    tibex:xpdlId="_v9OL0ALkEea-E4BSZRWYbA" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets/>
                    <bpws:sources>
                        <bpws:source linkName="_v9OL0ALkEea-E4BSZRWYbA to _BX_normalFlow">
                            <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[_BX_fanVariable=0; true]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <model:UserTaskDataModelType
                        distributionStrategy="OFFER"
                        userTaskPriority="50"
                        workModelID="WM__v9OL0ALkEea-E4BSZRWYbA"
                        workModelVersionRange="[1.0.0.qualifier,1.0.0.qualifier]"
                        xmi:version="2.0"
                        xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                        <userTaskParticipants>
                            <userTaskParticipant
                                entity="ORGANIZATIONAL_QUERY" rqlQuery=""/>
                        </userTaskParticipants>
                        <userTaskParameters>
                            <userTaskParameter mandatory="true"
                                mode="INOUT" name="Parameter"/>
                            <userTaskParameter mandatory="false"
                                mode="INOUT" name="CorrelationField"/>
                        </userTaskParameters>
                        <userTaskGroupMemberships/>
                    </model:UserTaskDataModelType>
                </tibex:extActivity>
            </bpws:extensionActivity>
        </bpws:scope>
        <bpws:empty name="_BX_normalFlow">
            <bpws:targets>
                <bpws:target linkName="_v9OL0ALkEea-E4BSZRWYbA to _BX_normalFlow"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_normalFlow to ScriptTask"/>
            </bpws:sources>
        </bpws:empty>
    </bpws:flow>
</bpws:process>
