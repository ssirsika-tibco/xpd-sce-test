<?xml version="1.0" encoding="UTF-8"?>
<bpws:process exitOnStandardFault="no" name="MainProcess"
    suppressJoinFailure="yes" tibex:bxVersion="1.16.0"
    tibex:explicitCompensation="yes"
    tibex:xpdlId="_Nw4SAA_1EeON57gSdlnC5A"
    xmlns:bpws="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore"
    xmlns:ns="http://www.tibco.com/bs3.0/_NwxkUA_1EeON57gSdlnC5A"
    xmlns:ns0="http://www.tibco.com/bs3.0/_NwxkUA_1EeON57gSdlnC5A"
    xmlns:ns1="http://www.tibco.com/bs3.0/_VLp0gBCEEeON57gSdlnC5A"
    xmlns:ns2="http://www.tibco.com/bs3.0/_VLp0gBCEEeON57gSdlnC5A"
    xmlns:ns3="http://www.tibco.com/bx/_Nw4SAA_1EeON57gSdlnC5A/fault"
    xmlns:tibex="http://www.tibco.com/bpel/2007/extensions"
    xmlns:tns1="http://example.com/dataclass"
    xmlns:ttns="http://example.com/dataclass"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <tibex:VariableDescriptor type="PersistentBatching">
        <task name="Rereadupdatedcasedata">
            <startingVariables>
                <variable>LoginDetailsCaseReference</variable>
                <variable>LoginDetailsFinal</variable>
            </startingVariables>
        </task>
        <task name="UpdateCaseDataFailed">
            <startingVariables>
                <variable>LoginDetailsTemp</variable>
                <variable>ErrorDetail</variable>
                <variable>LoginDetailsOriginal</variable>
                <variable>ErrorCode</variable>
            </startingVariables>
        </task>
        <task name="CaseDataWasNotUpdated">
            <startingVariables>
                <variable>LoginDetailsTemp</variable>
                <variable>ErrorDetail</variable>
                <variable>Parameter</variable>
                <variable>LoginDetailsCaseReference</variable>
                <variable>LoginId</variable>
                <variable>LoginDetailsOriginal</variable>
                <variable>LoginDetailsFinal</variable>
                <variable>ErrorCode</variable>
            </startingVariables>
        </task>
        <task name="UpdateGlobalCase">
            <startingVariables>
                <variable>LoginDetailsTemp</variable>
                <variable>LoginDetailsCaseReference</variable>
            </startingVariables>
        </task>
        <task name="_BX_assign_2">
            <startingVariables>
                <variable>Parameter</variable>
            </startingVariables>
        </task>
        <task name="DeleteGlobalCase">
            <startingVariables>
                <variable>LoginDetailsCaseReference</variable>
            </startingVariables>
        </task>
        <task name="DeleteCaseDataFailed">
            <startingVariables>
                <variable>LoginDetailsTemp</variable>
                <variable>ErrorDetail</variable>
                <variable>Parameter</variable>
                <variable>LoginDetailsCaseReference</variable>
                <variable>LoginId</variable>
                <variable>LoginDetailsOriginal</variable>
                <variable>LoginDetailsFinal</variable>
                <variable>ErrorCode</variable>
            </startingVariables>
        </task>
        <task name="ReadAndChangeLoginDetailsCase">
            <startingVariables>
                <variable>LoginDetailsTemp</variable>
                <variable>LoginDetailsCaseReference</variable>
                <variable>LoginId</variable>
                <variable>LoginDetailsOriginal</variable>
            </startingVariables>
        </task>
        <task name="EndOfProcessPageflow">
            <startingVariables>
                <variable>Parameter</variable>
                <variable>LoginDetailsOriginal</variable>
                <variable>LoginDetailsFinal</variable>
            </startingVariables>
        </task>
    </tibex:VariableDescriptor>
    <tibex:AuditDescriptor>
        <auditAttribute name="attribute3" type="Complex" value="LoginDetailsFinal.address.line1"/>
        <auditAttribute name="attribute4" type="Complex" value="LoginDetailsFinal.address.line2"/>
        <auditAttribute name="attribute9" type="Complex" value="LoginDetailsFinal.address.postcode"/>
        <auditAttribute name="attribute8" type="Complex" value="LoginDetailsFinal.address.town"/>
        <auditAttribute name="attribute2" type="Complex" value="LoginDetailsFinal.loginId"/>
    </tibex:AuditDescriptor>
    <bpws:documentation>*** Generated by TIBCO Business Studio.</bpws:documentation>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="ProcessAsService.wsdl" namespace="http://www.tibco.com/bs3.0/_VLp0gBCEEeON57gSdlnC5A"/>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="Process.wsdl" namespace="http://www.tibco.com/bs3.0/_NwxkUA_1EeON57gSdlnC5A"/>
    <bpws:import importType="http://schemas.xmlsoap.org/wsdl/"
        location="MainProcess-fault.wsdl" namespace="http://www.tibco.com/bx/_Nw4SAA_1EeON57gSdlnC5A/fault"/>
    <bpws:partnerLinks>
        <bpws:partnerLink name="MainProcess"
            partnerLinkType="ns0:MainProcess_PLT" partnerRole="MainProcessProvider"/>
        <bpws:partnerLink name="SubProcessAsServiceProcess_Consumer"
            partnerLinkType="ns2:SubProcessAsServiceProcess_PLT" partnerRole="SubProcessAsServiceProcessProvider"/>
    </bpws:partnerLinks>
    <bpws:variables>
        <bpws:variable name="Parameter"
            tibex:class="com.example.dataclass.DataClass"
            tibex:parameter="in" tibex:xpdlId="_r4K1sA_1EeON57gSdlnC5A"/>
        <bpws:variable name="LoginId" tibex:parameter="in"
            tibex:xpdlId="_4E9xMYNNEeOcadlsg2IG1w" type="xsd:string"/>
        <bpws:variable name="LoginDetailsCaseReference"
            tibex:classRef="com.example.businessdataproject.LoginDetails" tibex:xpdlId="_4E9xMoNNEeOcadlsg2IG1w"/>
        <bpws:variable name="LoginDetailsOriginal"
            tibex:class="com.example.businessdataproject.LoginDetails" tibex:xpdlId="_edTlEINOEeOcadlsg2IG1w"/>
        <bpws:variable name="LoginDetailsTemp"
            tibex:class="com.example.businessdataproject.LoginDetails" tibex:xpdlId="_SNbSYINPEeOcadlsg2IG1w"/>
        <bpws:variable name="LoginDetailsFinal"
            tibex:class="com.example.businessdataproject.LoginDetails" tibex:xpdlId="_MEI4kYNSEeOcadlsg2IG1w"/>
        <bpws:variable name="ErrorCode"
            tibex:xpdlId="_V5l6woNSEeOcadlsg2IG1w" type="xsd:string"/>
        <bpws:variable name="ErrorDetail"
            tibex:xpdlId="_V5l6w4NSEeOcadlsg2IG1w" type="xsd:string"/>
        <bpws:variable name="_BX_fanVariable" type="xsd:int">
            <bpws:from>
                <bpws:literal><![CDATA[0]]></bpws:literal>
            </bpws:from>
        </bpws:variable>
        <bpws:variable name="_BX_fanVariable_2" type="xsd:int">
            <bpws:from>
                <bpws:literal><![CDATA[0]]></bpws:literal>
            </bpws:from>
        </bpws:variable>
    </bpws:variables>
    <bpws:extensions>
        <bpws:extension mustUnderstand="yes" namespace="http://www.tibco.com/bpel/2007/extensions"/>
    </bpws:extensions>
    <bpws:eventHandlers/>
    <bpws:flow name="_BX_flow_xtpukFnZEemxUMp1MP_2QQ">
        <bpws:links>
            <bpws:link name="_BX_normalFlow_2 to EndEvent" tibex:xpdlId="_QbdB5A_1EeON57gSdlnC5A"/>
            <bpws:link
                name="SubProcessProcess to StartSubprocessAsService" tibex:xpdlId="_AmqeAA_2EeON57gSdlnC5A"/>
            <bpws:link
                name="_BX_scope_DeleteGlobalCase to DeleteCaseDataFailed" tibex:xpdlId="_LfOOsIT0EeOECuB6y1c95w"/>
            <bpws:link name="_BX_normalFlow to Rereadupdatedcasedata" tibex:xpdlId="_sRPSMINSEeOcadlsg2IG1w"/>
            <bpws:link
                name="DeleteCaseDataFailed to ERRORDeleteCaseDataFailed" tibex:xpdlId="_KdmZpIT0EeOECuB6y1c95w"/>
            <bpws:link
                name="CaseDataWasNotUpdated to ERRORCaseDataNotUpdated" tibex:xpdlId="_SDy4c4NTEeOcadlsg2IG1w"/>
            <bpws:link
                name="_BX_scope_UpdateGlobalCase to UpdateCaseDataFailed" tibex:xpdlId="_UydTk4NSEeOcadlsg2IG1w"/>
            <bpws:link name="CatchMessageEvent to SubProcessProcess" tibex:xpdlId="_rGx1AA_1EeON57gSdlnC5A"/>
            <bpws:link
                name="UpdateCaseDataFailed to ERRORUpdateCaseDataFailed" tibex:xpdlId="_lFDYU4NSEeOcadlsg2IG1w"/>
            <bpws:link
                name="CHECKCaseObjectUpdated to EndOfProcessPageflow" tibex:xpdlId="__afjYBCFEeON57gSdlnC5A"/>
            <bpws:link
                name="CHECKCaseObjectUpdated to CaseDataWasNotUpdated" tibex:xpdlId="_O_30cYNTEeOcadlsg2IG1w"/>
            <bpws:link
                name="_bucLEYNOEeOcadlsg2IG1w to _BX_scope_UpdateGlobalCase" tibex:xpdlId="_KJnCYINOEeOcadlsg2IG1w"/>
            <bpws:link
                name="Rereadupdatedcasedata to CHECKCaseObjectUpdated" tibex:xpdlId="__yfEQINSEeOcadlsg2IG1w"/>
            <bpws:link
                name="EndOfProcessPageflow to _BX_scope_DeleteGlobalCase" tibex:xpdlId="_2COhoITzEeOECuB6y1c95w"/>
            <bpws:link
                name="StartSubprocessAsService to _bucLEYNOEeOcadlsg2IG1w" tibex:xpdlId="_buf1cINOEeOcadlsg2IG1w"/>
            <bpws:link name="UpdateGlobalCase to _BX_normalFlow"/>
            <bpws:link name="DeleteGlobalCase to _BX_normalFlow_2"/>
        </bpws:links>
        <bpws:scope name="CatchMessageEvent"
            tibex:type="messageStartEvent" tibex:xpdlId="_QbdB4g_1EeON57gSdlnC5A">
            <bpws:sources>
                <bpws:source linkName="CatchMessageEvent to SubProcessProcess"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable
                    messageType="ns0:MainProcess_CatchMessageEvent_INPUT" name="v_61e1fa50"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence">
                <bpws:receive createInstance="yes" name="_BX_receive"
                    operation="CatchMessageEvent"
                    partnerLink="MainProcess" portType="ns0:MainProcess" variable="v_61e1fa50"/>
                <bpws:assign name="_BX_assign" validate="no">
                    <bpws:copy tibex:objectName="DataClass"
                        tibex:objectNamespace="http://example.com/dataclass" tibex:transform="XmlToObject">
                        <bpws:from part="Parameter" variable="v_61e1fa50"/>
                        <bpws:to variable="Parameter"/>
                    </bpws:copy>
                    <bpws:copy>
                        <bpws:from part="LoginId" variable="v_61e1fa50"/>
                        <bpws:to variable="LoginId"/>
                    </bpws:copy>
                </bpws:assign>
            </bpws:sequence>
        </bpws:scope>
        <bpws:empty name="EndEvent" tibex:migrationAllowed="yes"
            tibex:type="endEvent" tibex:xpdlId="_QbdB4w_1EeON57gSdlnC5A">
            <bpws:targets>
                <bpws:target linkName="_BX_normalFlow_2 to EndEvent"/>
            </bpws:targets>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="SubProcessProcess"
                tibex:migrationAllowed="yes"
                tibex:type="reusableSubProcess"
                tibex:xpdlId="_6gDFEQ_1EeON57gSdlnC5A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CatchMessageEvent to SubProcessProcess"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="SubProcessProcess to StartSubprocessAsService"/>
                </bpws:sources>
                <tibex:callProcess followParentLifecycle="yes"
                    packageRef="/ProjectMigrationTest_ProcessBuildFolders/Process Packages/SubProcess.xpdl"
                    priority="inline"
                    subProcessId="_waysUQ_1EeON57gSdlnC5A" version="[1.0.0,2.0.0)">
                    <tibex:subProcessInput>
                        <tibex:mapping field="Parameter" formalParameter="Parameter"/>
                    </tibex:subProcessInput>
                    <tibex:subProcessOutput>
                        <tibex:mapping field="Parameter"
                            formalParameter="Parameter" mandatory="yes"/>
                    </tibex:subProcessOutput>
                </tibex:callProcess>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="EndOfProcessPageflow"
                tibex:extendedAttributes="bpmJspTask=Process.xpdl\#_4--f8BYAEeO3r4rIOUpwpw&#xd;&#xa;"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_x8aDFBCEEeON57gSdlnC5A" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CHECKCaseObjectUpdated to EndOfProcessPageflow"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="EndOfProcessPageflow to _BX_scope_DeleteGlobalCase"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__x8aDFBCEEeON57gSdlnC5A"
                    workModelVersionRange="[1.0.0.20190408103910202,1.0.0.20190408103910202]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_e1GjQFcOEd6ECemE0GiJmQ"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="true" mode="IN" name="Parameter"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsFinal"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsOriginal"/>
                    </userTaskParameters>
                    <userTaskExtendedAttributes>
                        <userTaskExtendedAttribute name="bpmJspTask" value="Process.xpdl#_4--f8BYAEeO3r4rIOUpwpw"/>
                    </userTaskExtendedAttributes>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="StartSubprocessAsService"
            tibex:migrationAllowed="yes" tibex:type="serviceTask" tibex:xpdlId="_yM-8ERCMEeON57gSdlnC5A">
            <bpws:targets>
                <bpws:target linkName="SubProcessProcess to StartSubprocessAsService"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="StartSubprocessAsService to _bucLEYNOEeOcadlsg2IG1w"/>
            </bpws:sources>
            <bpws:variables>
                <bpws:variable
                    messageType="ns2:SubProcessAsServiceProcess_StartSubprocessAsService_INPUT" name="v_916a9fe1"/>
                <bpws:variable
                    messageType="ns2:SubProcessAsServiceProcess_StartSubprocessAsService_OUTPUT" name="v_a68ad3aa"/>
            </bpws:variables>
            <bpws:sequence name="_BX_sequence_3">
                <bpws:assign name="_BX_assign_2" validate="no">
                    <bpws:copy tibex:transform="ObjectToXml">
                        <bpws:from expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[ScriptUtil.copy(Parameter)]]></bpws:from>
                        <bpws:to part="Parameter" variable="v_916a9fe1"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:invoke inputVariable="v_916a9fe1"
                    name="_BX_invoke"
                    operation="StartSubprocessAsService"
                    outputVariable="v_a68ad3aa"
                    partnerLink="SubProcessAsServiceProcess_Consumer" portType="ns2:SubProcessAsServiceProcess"/>
                <bpws:assign name="_BX_assign_3" validate="no">
                    <bpws:copy tibex:objectName="DataClass"
                        tibex:objectNamespace="http://example.com/dataclass" tibex:transform="XmlToObject">
                        <bpws:from part="Parameter" variable="v_a68ad3aa"/>
                        <bpws:to variable="Parameter"/>
                    </bpws:copy>
                </bpws:assign>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="ReadAndChangeLoginDetailsCase"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_bucLEYNOEeOcadlsg2IG1w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="StartSubprocessAsService to _bucLEYNOEeOcadlsg2IG1w"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="_bucLEYNOEeOcadlsg2IG1w to _BX_scope_UpdateGlobalCase"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[LoginDetailsCaseReference = cac_com_example_businessdataproject_LoginDetails.findByLoginId(LoginId);

if (LoginDetailsCaseReference == null) {
	Log.write("Failed to find LoginDetails Case object for login id: '"+LoginId+"'");
	
} else {
    // Read original, then copy then change the copy
    // We will then update Case (next task) and then re-read it and ensure 
    // that the modification has worked.
	LoginDetailsOriginal = LoginDetailsCaseReference.readLoginDetails();
	
	LoginDetailsTemp = ScriptUtil.copy(LoginDetailsOriginal);
	
	LoginDetailsTemp.address.line1 += " MODIFIED";
	
}
]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:extensionActivity>
            <tibex:extActivity name="UpdateCaseDataFailed"
                tibex:extendedAttributes="bpmJspTask=form\://Process/MainProcess/UpdateCaseDataFailed/UpdateCaseDataFailed.form&#xd;&#xa;"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_UydTkoNSEeOcadlsg2IG1w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_scope_UpdateGlobalCase to UpdateCaseDataFailed"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="UpdateCaseDataFailed to ERRORUpdateCaseDataFailed"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__UydTkoNSEeOcadlsg2IG1w"
                    workModelVersionRange="[1.0.0.20190408103910202,1.0.0.20190408103910202]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_e1GjQFcOEd6ECemE0GiJmQ"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorCode"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorDetail"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsTemp"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsOriginal"/>
                    </userTaskParameters>
                    <userTaskExtendedAttributes>
                        <userTaskExtendedAttribute name="bpmJspTask" value="form://Process/MainProcess/UpdateCaseDataFailed/UpdateCaseDataFailed.form"/>
                    </userTaskExtendedAttributes>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="ERRORUpdateCaseDataFailed"
            tibex:migrationAllowed="yes" tibex:type="errorEndEvent" tibex:xpdlId="_lFDYUoNSEeOcadlsg2IG1w">
            <bpws:targets>
                <bpws:target linkName="UpdateCaseDataFailed to ERRORUpdateCaseDataFailed"/>
            </bpws:targets>
            <bpws:variables>
                <bpws:variable
                    messageType="ns3:ERRORUpdateCaseDataFailedFault" name="var_Error1"/>
            </bpws:variables>
            <bpws:sequence name="sequence_Error1">
                <bpws:assign name="assign_error1" validate="no">
                    <bpws:copy>
                        <bpws:from>
                            <bpws:literal>Error1</bpws:literal>
                        </bpws:from>
                        <bpws:to part="errorCode" variable="var_Error1"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:throw faultName="Error1"
                    faultVariable="var_Error1" name="throw_Error1"/>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="Rereadupdatedcasedata"
                tibex:migrationAllowed="yes" tibex:type="scriptTask"
                tibex:xpdlId="_sRMO4INSEeOcadlsg2IG1w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_normalFlow to Rereadupdatedcasedata"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="Rereadupdatedcasedata to CHECKCaseObjectUpdated"/>
                </bpws:sources>
                <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[// re-read case object into final variable and compare address line one with original
// to check whether change made in previous script was made on ACTUAL global data
// (in coditional flow that follows)
LoginDetailsFinal = LoginDetailsCaseReference.readLoginDetails();

]]></tibex:script>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:empty name="CHECKCaseObjectUpdated"
            tibex:migrationAllowed="yes" tibex:type="exclusiveGateway" tibex:xpdlId="__ybZ4YNSEeOcadlsg2IG1w">
            <bpws:targets>
                <bpws:target linkName="Rereadupdatedcasedata to CHECKCaseObjectUpdated"/>
            </bpws:targets>
            <bpws:sources tibex:maxTrue="1">
                <bpws:source linkName="CHECKCaseObjectUpdated to EndOfProcessPageflow">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[LoginDetailsFinal.address.line1 == 
     (LoginDetailsOriginal.address.line1 + " MODIFIED");
     ]]></bpws:transitionCondition>
                </bpws:source>
                <bpws:source linkName="CHECKCaseObjectUpdated to CaseDataWasNotUpdated">
                    <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[##otherwise##]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
        </bpws:empty>
        <bpws:extensionActivity>
            <tibex:extActivity name="CaseDataWasNotUpdated"
                tibex:extendedAttributes="bpmJspTask=form\://Process/MainProcess/DataNotCaseUpdated/DataNotCaseUpdated.form&#xd;&#xa;"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_O_30cINTEeOcadlsg2IG1w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="CHECKCaseObjectUpdated to CaseDataWasNotUpdated"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="CaseDataWasNotUpdated to ERRORCaseDataNotUpdated"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__O_30cINTEeOcadlsg2IG1w"
                    workModelVersionRange="[1.0.0.20190408103910202,1.0.0.20190408103910202]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_e1GjQFcOEd6ECemE0GiJmQ"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="true" mode="IN" name="Parameter"/>
                        <userTaskParameter mandatory="true" mode="IN" name="LoginId"/>
                        <userTaskParameter mandatory="false" mode="IN" name="LoginDetailsCaseReference"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsOriginal"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsTemp"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsFinal"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorCode"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorDetail"/>
                    </userTaskParameters>
                    <userTaskExtendedAttributes>
                        <userTaskExtendedAttribute name="bpmJspTask" value="form://Process/MainProcess/DataNotCaseUpdated/DataNotCaseUpdated.form"/>
                    </userTaskExtendedAttributes>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="ERRORCaseDataNotUpdated"
            tibex:migrationAllowed="yes" tibex:type="errorEndEvent" tibex:xpdlId="_SDy4coNTEeOcadlsg2IG1w">
            <bpws:targets>
                <bpws:target linkName="CaseDataWasNotUpdated to ERRORCaseDataNotUpdated"/>
            </bpws:targets>
            <bpws:variables>
                <bpws:variable
                    messageType="ns3:ERRORCaseDataNotUpdatedFault" name="var_CaseDataNotUpdated"/>
            </bpws:variables>
            <bpws:sequence name="sequence_CaseDataNotUpdated">
                <bpws:assign name="assign_casedatanotupdated" validate="no">
                    <bpws:copy>
                        <bpws:from>
                            <bpws:literal>CaseDataNotUpdated</bpws:literal>
                        </bpws:from>
                        <bpws:to part="errorCode" variable="var_CaseDataNotUpdated"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:throw faultName="CaseDataNotUpdated"
                    faultVariable="var_CaseDataNotUpdated" name="throw_CaseDataNotUpdated"/>
            </bpws:sequence>
        </bpws:scope>
        <bpws:extensionActivity>
            <tibex:extActivity name="DeleteCaseDataFailed"
                tibex:extendedAttributes="bpmJspTask=form\://Process/MainProcess/DeleteCaseDataFailed/DeleteCaseDataFailed.form&#xd;&#xa;"
                tibex:migrationAllowed="yes" tibex:type="userTask"
                tibex:xpdlId="_KdmZoIT0EeOECuB6y1c95w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                <bpws:targets>
                    <bpws:target linkName="_BX_scope_DeleteGlobalCase to DeleteCaseDataFailed"/>
                </bpws:targets>
                <bpws:sources>
                    <bpws:source linkName="DeleteCaseDataFailed to ERRORDeleteCaseDataFailed"/>
                </bpws:sources>
                <model:UserTaskDataModelType
                    distributionStrategy="OFFER" userTaskPriority="50"
                    workModelID="WM__KdmZoIT0EeOECuB6y1c95w"
                    workModelVersionRange="[1.0.0.20190408103910202,1.0.0.20190408103910202]"
                    xmi:version="2.0"
                    xmlns:model="http://model.ut.n2.tibco.com" xmlns:xmi="http://www.omg.org/XMI">
                    <userTaskParticipants>
                        <userTaskParticipant entity="ROLE"
                            modelVersion="1" uniqueId="_e1GjQFcOEd6ECemE0GiJmQ"/>
                    </userTaskParticipants>
                    <userTaskParameters>
                        <userTaskParameter mandatory="true" mode="IN" name="Parameter"/>
                        <userTaskParameter mandatory="true" mode="IN" name="LoginId"/>
                        <userTaskParameter mandatory="false" mode="IN" name="LoginDetailsCaseReference"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsOriginal"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsTemp"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="LoginDetailsFinal"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorCode"/>
                        <userTaskParameter mandatory="false"
                            mode="INOUT" name="ErrorDetail"/>
                    </userTaskParameters>
                    <userTaskExtendedAttributes>
                        <userTaskExtendedAttribute name="bpmJspTask" value="form://Process/MainProcess/DeleteCaseDataFailed/DeleteCaseDataFailed.form"/>
                    </userTaskExtendedAttributes>
                    <userTaskGroupMemberships/>
                </model:UserTaskDataModelType>
            </tibex:extActivity>
        </bpws:extensionActivity>
        <bpws:scope name="ERRORDeleteCaseDataFailed"
            tibex:migrationAllowed="yes" tibex:type="errorEndEvent" tibex:xpdlId="_KdmZo4T0EeOECuB6y1c95w">
            <bpws:targets>
                <bpws:target linkName="DeleteCaseDataFailed to ERRORDeleteCaseDataFailed"/>
            </bpws:targets>
            <bpws:variables>
                <bpws:variable
                    messageType="ns3:ERRORDeleteCaseDataFailedFault" name="var_DeleteCaseDataFailed"/>
            </bpws:variables>
            <bpws:sequence name="sequence_DeleteCaseDataFailed">
                <bpws:assign name="assign_deletecasedatafailed" validate="no">
                    <bpws:copy>
                        <bpws:from>
                            <bpws:literal>DeleteCaseDataFailed</bpws:literal>
                        </bpws:from>
                        <bpws:to part="errorCode" variable="var_DeleteCaseDataFailed"/>
                    </bpws:copy>
                </bpws:assign>
                <bpws:throw faultName="DeleteCaseDataFailed"
                    faultVariable="var_DeleteCaseDataFailed" name="throw_DeleteCaseDataFailed"/>
            </bpws:sequence>
        </bpws:scope>
        <bpws:scope name="_BX_scope_UpdateGlobalCase" tibex:migrationAllowed="yes">
            <bpws:targets>
                <bpws:target linkName="_bucLEYNOEeOcadlsg2IG1w to _BX_scope_UpdateGlobalCase"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_scope_UpdateGlobalCase to UpdateCaseDataFailed">
                    <bpws:transitionCondition><![CDATA[$_BX_fanVariable=1]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
            <bpws:faultHandlers>
                <bpws:catchAll tibex:faultDetailsVar="var_errorDetail" tibex:faultNameVar="var_errorCode">
                    <bpws:assign name="ErrorEvent"
                        tibex:type="boundaryErrorEvent"
                        tibex:xpdlId="_QH9TUINSEeOcadlsg2IG1w" validate="no">
                        <bpws:copy>
                            <bpws:from><![CDATA[1]]></bpws:from>
                            <bpws:to variable="_BX_fanVariable"/>
                        </bpws:copy>
                        <bpws:copy>
                            <bpws:from variable="var_errorCode"/>
                            <bpws:to variable="ErrorCode"/>
                        </bpws:copy>
                        <bpws:copy>
                            <bpws:from variable="var_errorDetail"/>
                            <bpws:to variable="ErrorDetail"/>
                        </bpws:copy>
                    </bpws:assign>
                </bpws:catchAll>
            </bpws:faultHandlers>
            <bpws:extensionActivity>
                <tibex:extActivity name="UpdateGlobalCase"
                    tibex:type="serviceTask"
                    tibex:xpdlId="_KI_XUINOEeOcadlsg2IG1w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets/>
                    <bpws:sources>
                        <bpws:source linkName="UpdateGlobalCase to _BX_normalFlow">
                            <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[_BX_fanVariable=0; true]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[LoginDetailsCaseReference.updateLoginDetails(LoginDetailsTemp);]]></tibex:script>
                </tibex:extActivity>
            </bpws:extensionActivity>
        </bpws:scope>
        <bpws:empty name="_BX_normalFlow">
            <bpws:targets>
                <bpws:target linkName="UpdateGlobalCase to _BX_normalFlow"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_normalFlow to Rereadupdatedcasedata"/>
            </bpws:sources>
        </bpws:empty>
        <bpws:scope name="_BX_scope_DeleteGlobalCase" tibex:migrationAllowed="yes">
            <bpws:targets>
                <bpws:target linkName="EndOfProcessPageflow to _BX_scope_DeleteGlobalCase"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_scope_DeleteGlobalCase to DeleteCaseDataFailed">
                    <bpws:transitionCondition><![CDATA[$_BX_fanVariable_2=1]]></bpws:transitionCondition>
                </bpws:source>
            </bpws:sources>
            <bpws:faultHandlers>
                <bpws:catchAll tibex:faultDetailsVar="var_errorDetail" tibex:faultNameVar="var_errorCode">
                    <bpws:assign name="ErrorEvent2"
                        tibex:type="boundaryErrorEvent"
                        tibex:xpdlId="_H7V4QIT0EeOECuB6y1c95w" validate="no">
                        <bpws:copy>
                            <bpws:from><![CDATA[1]]></bpws:from>
                            <bpws:to variable="_BX_fanVariable_2"/>
                        </bpws:copy>
                    </bpws:assign>
                </bpws:catchAll>
            </bpws:faultHandlers>
            <bpws:extensionActivity>
                <tibex:extActivity name="DeleteGlobalCase"
                    tibex:type="serviceTask"
                    tibex:xpdlId="_2CC7cITzEeOECuB6y1c95w" xmlns:tibex="http://www.tibco.com/bpel/2007/extensions">
                    <bpws:targets/>
                    <bpws:sources>
                        <bpws:source linkName="DeleteGlobalCase to _BX_normalFlow_2">
                            <bpws:transitionCondition expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[_BX_fanVariable_2=0; true]]></bpws:transitionCondition>
                        </bpws:source>
                    </bpws:sources>
                    <tibex:script expressionLanguage="urn:tibco:wsbpel:2.0:sublang:javascript"><![CDATA[Process.checkIfSafeToDeleteCase(LoginDetailsCaseReference);
LoginDetailsCaseReference.deleteLoginDetails();]]></tibex:script>
                </tibex:extActivity>
            </bpws:extensionActivity>
        </bpws:scope>
        <bpws:empty name="_BX_normalFlow_2">
            <bpws:targets>
                <bpws:target linkName="DeleteGlobalCase to _BX_normalFlow_2"/>
            </bpws:targets>
            <bpws:sources>
                <bpws:source linkName="_BX_normalFlow_2 to EndEvent"/>
            </bpws:sources>
        </bpws:empty>
    </bpws:flow>
</bpws:process>
