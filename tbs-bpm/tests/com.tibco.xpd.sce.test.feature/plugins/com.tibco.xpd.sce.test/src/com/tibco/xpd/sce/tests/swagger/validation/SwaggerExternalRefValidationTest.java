/*
* Copyright (c) 2004-2024. Cloud Software Group, Inc. All Rights Reserved.
*/
package com.tibco.xpd.sce.tests.swagger.validation;

import com.tibco.xpd.core.test.util.TestResourceInfo;
import com.tibco.xpd.core.test.validations.ValidationsTestProblemMarkerInfo;
import com.tibco.xpd.n2.test.core.validation.AbstractN2BaseValidationTest;

/**
 * SwaggerExternalRefValidationTest
 * <p>
 * SwaggerExternalRefValidationTest - Test selected validations are correctly raised.
 * </p>
 * <p>
 * Generated by: createBaseTest.javajet
 * </p>
 *
 * ACE-8272: Validation rule against the swagger external reference
 *
 * @author ssirsika
 * @since 13 Oct 2024
 */
public class SwaggerExternalRefValidationTest extends AbstractN2BaseValidationTest
{

	public SwaggerExternalRefValidationTest()
	{
		super(true);
	}

	/**
	 * SwaggerExternalRefValidationTest
	 * 
	 * @throws Exception
	 */
	public void testSwaggerExternalRefValidationTest() throws Exception
	{
		doTestValidations();
		return;
	}

	@Override
	protected ValidationsTestProblemMarkerInfo[] getValidationProblemMarkerInfos()
	{
		ValidationsTestProblemMarkerInfo[] markerInfos = new ValidationsTestProblemMarkerInfo[]{

				// External reference in Path parameter
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedInputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported request content: External types are not supported (userId : ./schemas/UserIdSchema.yaml) (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// External reference in header parameter
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedInputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported request content: External types are not supported (headerType : ./schemas/UserHeaderTypeSchema.yaml) (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// External reference in query parameter
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedInputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported request content: External types are not supported (queryType : ./schemas/UserQueryTypeSchema.yaml) (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// External reference in payload
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedInputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported request content: External types are not supported (./schemas/UserUpdatePayload.yaml : External type (unsupported)) (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// External reference in response header
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedOutputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported response (200) content: External types are not supported (X-Rate-Limit : ./schemas/LimitSchema.yaml)     (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// External reference in response schema
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedOutputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported response (200) content: External types are not supported (externalData : ./schemas/ExternalData.yaml)     (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// Response Payload uses local type with indirect reference to local type with indirect reference to
				// external schema
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedOutputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported response (201) content: External types are not supported (IndirectExternalRef1 : External type (unsupported)... ./schemas/IndirectRef.yaml/IndirectType)     (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				// Response Header uses local type with indirect reference to external schema
				new ValidationsTestProblemMarkerInfo("/SwaggerExternalRef/Process Packages/SwaggerExternalRef.xpdl", //$NON-NLS-1$
						"ace.unsupportedOutputPayloadContent", //$NON-NLS-1$
						"_nOuH4IldEe-j4aCTPUi3qg", //$NON-NLS-1$
						"BPM  : Unsupported response (201) content: External types are not supported (X-Rate-Limit : IndirectExternalRef2... ./schemas/IndirectRef.yaml/IndirectType)     (SwaggerExternalRefProcess:ExternalRefTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

		};
		return markerInfos;
	}

	@Override
	protected String getTestName()
	{
		return "SwaggerExternalRefValidationTest"; //$NON-NLS-1$
	}

	@Override
	protected String getTestPlugInId()
	{
		return "com.tibco.xpd.sce.test"; //$NON-NLS-1$
	}

	@Override
	protected TestResourceInfo[] getTestResources()
	{
		TestResourceInfo[] testResources = new TestResourceInfo[]{
				new TestResourceInfo("resources/SwaggerExternalRefValidationTest", //$NON-NLS-1$
						"SwaggerExternalRef/Process Packages{processes}/SwaggerExternalRef.xpdl"), //$NON-NLS-1$
				new TestResourceInfo("resources/SwaggerExternalRefValidationTest", //$NON-NLS-1$
						"SwaggerExternalRef/BOM Folder{bom}/BOMData.bom"), //$NON-NLS-1$
				new TestResourceInfo("resources/SwaggerExternalRefValidationTest", //$NON-NLS-1$
						"SwaggerExternalRef/REST Services{rest}/external-ref.yaml"), //$NON-NLS-1$
		};

		return testResources;
	}

}
