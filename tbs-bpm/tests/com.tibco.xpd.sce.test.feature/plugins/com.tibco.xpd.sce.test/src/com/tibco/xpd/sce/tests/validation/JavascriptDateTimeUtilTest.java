/**
 * Copyright (c) TIBCO Software Inc 2004-2009. All rights reserved.
 */
package com.tibco.xpd.sce.tests.validation;

import org.eclipse.core.resources.IProject;
import org.eclipse.core.resources.ResourcesPlugin;

import com.tibco.xpd.core.test.util.TestResourceInfo;
import com.tibco.xpd.core.test.util.TestUtil;
import com.tibco.xpd.core.test.validations.ValidationsTestProblemMarkerInfo;
import com.tibco.xpd.n2.test.core.validation.AbstractN2BaseValidationTest;
import com.tibco.xpd.resources.util.ProjectImporter;

/**
 * JavascriptDateTimeUtilTest
 * <p>
 * JavascriptDateTimeUtilTest - Test selected validations are correctly raised.
 * </p>
 * <p>
 * Generated by: createBaseTest.javajet
 * </p>
 *
 * 
 *
 * @author
 * @since
 */
public class JavascriptDateTimeUtilTest extends AbstractN2BaseValidationTest
{

	private ProjectImporter projectImporter;

	public JavascriptDateTimeUtilTest()
	{
		super(true);
	}

	/**
	 * JavascriptDateTimeUtilTest
	 * 
	 * @throws Exception
	 */
	public void testJavascriptDateTimeUtilMethods() throws Exception
	{
		TestUtil.buildAndWait();

		doTestValidations();

		/*
		 * Sid ACE-8609 DateTimeUtil_Subtract_Test project uses all of the feature of bpm.dateTimeUtil.subtract(date1,
		 * date2) and the resultant Duration return object content.
		 * 
		 * If all is present and correct, then the project should have no problem markers.
		 */
		IProject dateTimeUtilSubtractTestProject = ResourcesPlugin.getWorkspace().getRoot()
				.getProject("DateTimeUtil_Subtract_Test");
		assertFalse("DateTimeUtil_Subtract_Test" //$NON-NLS-1$
				+ " project should not have any ERROR level problem markers, but has:\n"
				+ TestUtil.getErrorProblemMarkerList(dateTimeUtilSubtractTestProject, true),
				TestUtil.hasErrorProblemMarker(
						dateTimeUtilSubtractTestProject, // $NON-NLS-1$
						true, "JavascriptDateTimeUtilTest")); //$NON-NLS-1$

		return;
	}

	/**
	 * @see com.tibco.xpd.core.test.util.AbstractBaseResourceTest#customTestResourceSetup()
	 *
	 */
	@Override
	protected void customTestResourceSetup()
	{
		/*
		 * This test doesn't create files via the normal getTestResources() because we want to import and migrate a
		 * whole project from AMX BPM.
		 */
		projectImporter = TestUtil.importProjectsFromZip(getTestPlugInId(),
				new String[]{"resources/JavascriptDateTimeUtilTest/JavascriptDateTimeUtilTest/",
						"resources/JavascriptDateTimeUtilTest/DateTimeUtil_Subtract_Test/"},
				new String[]{"JavascriptDateTimeUtilTest", "DateTimeUtil_Subtract_Test"});

		assertTrue("Failed to load projects from \"resources/JavascriptDateTimeUtilTest/", projectImporter != null);

		TestUtil.buildAndWait();

	}

	/**
	 * @see com.tibco.xpd.core.test.util.AbstractBaseResourceTest#tearDown()
	 *
	 * @throws Exception
	 */
	@Override
	protected void tearDown() throws Exception
	{
		if (projectImporter != null)
		{
			projectImporter.performDelete();
		}
		super.tearDown();
	}

	/*
	 * @Override protected ValidationsTestProblemMarkerInfo[] getValidationProblemMarkerInfos() { return new
	 * ValidationsTestProblemMarkerInfo[]{}; }
	 */

	@Override
	protected ValidationsTestProblemMarkerInfo[] getValidationProblemMarkerInfos()
	{
		ValidationsTestProblemMarkerInfo[] markerInfos = new ValidationsTestProblemMarkerInfo[]{

				new ValidationsTestProblemMarkerInfo(
						"/JavascriptDateTimeUtilTest/Process Packages/JavascriptDateTimeUtilTest.xpdl", //$NON-NLS-1$
						"bx.validateScriptTask", //$NON-NLS-1$
						"_nUi2V4j0Ee6qBaoYQ06ihg", //$NON-NLS-1$
						"BPM  : At Line:14 column:90, Method addDuration is not applicable for the provided argument types (Time,Boolean,String,Integer,Integer,Integer,Integer,Integer,Integer) (JavascriptDateTimeUtilTestProcess:ScriptTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				new ValidationsTestProblemMarkerInfo(
						"/JavascriptDateTimeUtilTest/Process Packages/JavascriptDateTimeUtilTest.xpdl", //$NON-NLS-1$
						"bx.validateScriptTask", //$NON-NLS-1$
						"_nUi2V4j0Ee6qBaoYQ06ihg", //$NON-NLS-1$
						"BPM  : At Line:17 column:87, Method addDuration is not applicable for the provided number of arguments  (JavascriptDateTimeUtilTestProcess:ScriptTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				new ValidationsTestProblemMarkerInfo(
						"/JavascriptDateTimeUtilTest/Process Packages/JavascriptDateTimeUtilTest.xpdl", //$NON-NLS-1$
						"bx.validateScriptTask", //$NON-NLS-1$
						"_nUi2V4j0Ee6qBaoYQ06ihg", //$NON-NLS-1$
						"BPM  : At Line:18 column:70, Method addDuration is not applicable for the provided number of arguments  (JavascriptDateTimeUtilTestProcess:ScriptTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

				new ValidationsTestProblemMarkerInfo(
						"/JavascriptDateTimeUtilTest/Process Packages/JavascriptDateTimeUtilTest.xpdl", //$NON-NLS-1$
						"bx.validateScriptTask", //$NON-NLS-1$
						"_nUi2V4j0Ee6qBaoYQ06ihg", //$NON-NLS-1$
						"BPM  : At Line:7 column:64, Method convertDateTimeToDateTimeTZ is not applicable for the provided number of arguments  (JavascriptDateTimeUtilTestProcess:ScriptTask)", //$NON-NLS-1$
						""), //$NON-NLS-1$

		};
		return markerInfos;
	}

	@Override
	protected String getTestName()
	{
		return "JavascriptDateTimeUtilTest"; //$NON-NLS-1$
	}

	@Override
	protected String getTestPlugInId()
	{
		return "com.tibco.xpd.sce.test"; //$NON-NLS-1$
	}

	@Override
	protected TestResourceInfo[] getTestResources()
	{
		return new TestResourceInfo[]{};
	}

}
