/**
 * Copyright (c) TIBCO Software Inc 2004-2009. All rights reserved.
 */
package com.tibco.xpd.sce.tests.validation;

import org.eclipse.core.resources.IFile;
import org.eclipse.core.resources.ResourcesPlugin;

import com.tibco.xpd.core.test.util.TestResourceInfo;
import com.tibco.xpd.core.test.util.TestUtil;
import com.tibco.xpd.core.test.validations.ValidationsTestProblemMarkerInfo;
import com.tibco.xpd.n2.test.core.validation.AbstractN2BaseValidationTest;
import com.tibco.xpd.resources.util.ProjectImporter;

/**
 * RepeatingScriptFunctionParameterTest
 * <p>
 * RepeatingScriptFunctionParameterTest - Test selected validations are correctly raised.
 * </p>
 * <p>
 * Generated by: createBaseTest.javajet
 * </p>
 *
 * 
 *
 * @author
 * @since
 */
public class RepeatingScriptFunctionParameterTest extends AbstractN2BaseValidationTest {
    private ProjectImporter projectImporter;

	public RepeatingScriptFunctionParameterTest() {
		super(true);
	}

    /**
     * @see com.tibco.xpd.core.test.util.AbstractBaseResourceTest#customTestResourceSetup()
     *
     */
    @Override
    protected void customTestResourceSetup() {

        /*
         * This test doesn't create files via the normal getTestResources() because we want to import and migrate a
         * whole project from AMX BPM.
         */
        projectImporter = TestUtil.importProjectsFromZip("com.tibco.xpd.sce.test", //$NON-NLS-1$
                new String[] { "resources/RepeatingScriptFunctionParameterTest/RepeatingParameterTestData/", //$NON-NLS-1$
                        "resources/RepeatingScriptFunctionParameterTest/RepeatingParameterTestProcess/" }, //$NON-NLS-1$
                new String[] { "RepeatingParameterTestData", //$NON-NLS-1$
                        "RepeatingParameterTestProcess" }); //$NON-NLS-1$

        assertTrue("Failed to load projects from \"resources/RepeatingScriptFunctionParameterTest/", //$NON-NLS-1$
                projectImporter != null);
    }

	/**
	 * @see com.tibco.xpd.core.test.util.AbstractBaseResourceTest#tearDown()
	 *
	 * @throws Exception
	 */
	@Override
	protected void tearDown() throws Exception
	{
		if (projectImporter != null)
		{
			projectImporter.performDelete();
		}

		super.tearDown();
	}

	/**
     * RepeatingScriptFunctionParameterTest
     * 
     * @throws Exception
     */
    public void testRepeatingScriptFunctionParameterTest() throws Exception {
        /* One of the XPDL's should be clean. */
        IFile validXpdl = ResourcesPlugin.getWorkspace().getRoot().getProject("RepeatingParameterTestProcess")
                .getFolder("Process Packages").getFile("RepeatingParameterTestValidProcess.xpdl");

        if (TestUtil.hasErrorProblemMarker(validXpdl, true, "RepeatingScriptFunctionParameterTest")) {
            fail("RepeatingParameterTestValidProcess.xpdl should not have error level problem markers but has:\n" //$NON-NLS-1$
                            + TestUtil.markersToString(TestUtil.getErrorMarkers(validXpdl)));
        }

        /* And one should have problems. */
        doTestValidations();

        return;
	}

	@Override
    protected ValidationsTestProblemMarkerInfo[] getValidationProblemMarkerInfos() {
        ValidationsTestProblemMarkerInfo[] markerInfos = new ValidationsTestProblemMarkerInfo[] { 
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:10 column:19, Method UTC is not applicable for the provided number of arguments  (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:11 column:69, Method UTC is not applicable for the provided number of arguments  (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:12 column:69, Method UTC is not applicable for the provided argument types (Integer,Decimal,Integer,Integer,Integer,String,Decimal) (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:15 column:28, Method max is not applicable for the provided number of arguments  (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:16 column:42, Method max is not applicable for the provided number of arguments  (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:2 column:69, Method splice is not applicable for the provided number of arguments  (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
                // new ValidationsTestProblemMarkerInfo(
                // "/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl",
                // //$NON-NLS-1$
                // "bx.validateScriptTask", //$NON-NLS-1$
                // "_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$
                // "BPM : At Line:3 column:70, Method splice is not applicable for the provided number of arguments
                // (InvalidUsage:ScriptTask)", //$NON-NLS-1$
                // ""), //$NON-NLS-1$
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:4 column:76, Method splice is not applicable for the provided argument types (Integer,String) (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:5 column:89, Method splice is not applicable for the provided argument types (Integer,Date,String) (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.warning.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:11 column:69, Unable to determine type, operation may not be supported and content assist will not be available (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.warning.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:12 column:69, Unable to determine type, operation may not be supported and content assist will not be available (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.warning.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:15 column:28, Unable to determine type, operation may not be supported and content assist will not be available (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			
			    new ValidationsTestProblemMarkerInfo(
			    		"/RepeatingParameterTestProcess/Process Packages/RepeatingParameterTestInvalidProcess.xpdl", //$NON-NLS-1$ 
			    		"bx.warning.validateScriptTask", //$NON-NLS-1$ 
			    		"_EmjwFhhmEeuTmOZVr9wSkw", //$NON-NLS-1$ 
			    		"BPM  : At Line:16 column:42, Unable to determine type, operation may not be supported and content assist will not be available (InvalidUsage:ScriptTask)", //$NON-NLS-1$ 
			    		""), //$NON-NLS-1$ 
			    		
			                
        };
        return markerInfos;
    }

    @Override
    protected String getTestName() {
        return "RepeatingScriptFunctionParameterTest"; //$NON-NLS-1$
    }

    @Override
    protected String getTestPlugInId() {
        return "com.tibco.xpd.sce.test"; //$NON-NLS-1$
    }

    @Override
    protected TestResourceInfo[] getTestResources() {
        TestResourceInfo[] testResources = new TestResourceInfo[] {};

        return testResources;
    }

}
